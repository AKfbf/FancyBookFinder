(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{10:function(e,t,n){e.exports={container:"BookItem_container__3t_Ab",bookCover:"BookItem_bookCover__3t96d",textContainer:"BookItem_textContainer__2UuL6"}},12:function(e,t,n){e.exports={container:"Search_container__2B4nw",innerContainer:"Search_innerContainer__2ylmM"}},13:function(e,t,n){e.exports={innerContainer:"BooksList_innerContainer__1h7Xc",container:"BooksList_container__1SY-n"}},23:function(e,t,n){e.exports={App:"App_App__3uphm",AppLogo:"App_AppLogo__3QkF4","App-logo":"App_App-logo__H2Zt-","App-logo-spin":"App_App-logo-spin__2T9zc","App-header":"App_App-header__3ECVW","App-link":"App_App-link__36KB4"}},31:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),c=n.n(r),i=n(22),o=n.n(i),s=(n(31),n(4)),l=n.n(s),u=n(5),p=n(3),b=n(23),j=n.n(b),h=n(25),d=n(12),f=n.n(d),g=n(24),x=n.n(g),O={get:function(e){return x.a.get("https://www.googleapis.com/books/v1/volumes?"+e+"&key=".concat("AIzaSyCzE_gnYcLN3UTWwc4TPY0AcioPexvSYeA"))}},m=function(e,t,n){console.log("query options",e);var a="q=".concat(e.title||e.author||e.language||e.publishedDate||"");return a+=e.title&&"+intitle:".concat(e.title),a+=e.author&&"+inauthor:".concat(e.author),a+=e.language&&"+inlanguage:".concat(e.language),a+=e.publisher&&"+inpublisher:".concat(e.publisher),a+="&startIndex=".concat(n,"&maxResults=").concat(t),console.log("query",a),a},_=n(7),v=n.n(_),C=function(e){var t={text:Object(a.jsxs)("div",{className:v.a.fieldContainer,children:[Object(a.jsx)("label",{htmlFor:"",children:e.label}),Object(a.jsx)("input",{type:"text",onChange:function(t){return e.setter(t.currentTarget.value)}})]}),select:Object(a.jsxs)("div",{className:v.a.fieldContainer,children:[Object(a.jsx)("label",{htmlFor:"",children:e.label}),Object(a.jsx)("select",{onChange:function(t){return e.setter(t.currentTarget.value)},defaultValue:"",children:e.options&&e.options.map((function(e,t){return Object(a.jsx)("option",{value:e.toLowerCase(),children:e},e+t)}))})]}),date:Object(a.jsxs)("div",{className:v.a.fieldContainer,children:[Object(a.jsx)("label",{htmlFor:"",children:e.label}),Object(a.jsx)("input",{type:"date",onChange:function(t){return e.setter(t.currentTarget.value)}})]}),checkbox:Object(a.jsxs)("div",{className:v.a.fieldContainer,children:[Object(a.jsx)("label",{htmlFor:"",children:e.label}),Object(a.jsx)("input",{type:"checkbox",onChange:function(t){return e.setter(t.currentTarget.value)}})]})};return Object(a.jsx)("div",{children:e.type&&t[e.type]})||Object(a.jsx)("div",{})},k=function(e){return[Object(a.jsx)(C,{label:"Author",setter:e.setAuthor,type:"text"},"Author"),Object(a.jsx)(C,{label:"Language",setter:e.setLanguage,value:e.language,options:["","PL","ENG"],type:"select"},"Language"),Object(a.jsx)(C,{label:"Publisher",setter:e.setPublisher,type:"text"},"Publisher")]},A=function(e,t,n){n.preventDefault(),y(e,6,0,t)},y=function(){var e=Object(u.a)(l.a.mark((function e(t,n,a,r){var c,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=m(t,n,a),e.next=3,O.get(c);case 3:i=e.sent,r.updateBooksData(i.data.items),r.setApiCallCounter(0);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),w=function(){var e=Object(u.a)(l.a.mark((function e(t,n,a,r){var c,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=m({title:t.title,author:t.author,language:t.language,publisher:t.publisher},n,a),e.next=3,O.get(c);case 3:(i=e.sent).data.items&&i.data.items.forEach((function(e){r.updateBooksData((function(t){return[].concat(Object(h.a)(t),[e])}))}));case 5:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),D=function(e){var t=Object(r.useState)(""),n=Object(p.a)(t,2),c=n[0],i=n[1],o=Object(r.useState)(""),s=Object(p.a)(o,2),l=s[0],u=s[1],b=Object(r.useState)(""),j=Object(p.a)(b,2),h=j[0],d=j[1],g=Object(r.useState)(""),x=Object(p.a)(g,2),O=x[0],m=x[1],_=Object(r.useState)(!1),v=Object(p.a)(_,2),y=v[0],D=v[1];return Object(r.useEffect)((function(){w({title:c,author:l,language:h,publisher:O},6,6*e.apiCallCounter-1,e)}),[e.apiCallCounter]),Object(a.jsx)("div",{className:f.a.container,children:Object(a.jsx)("div",{className:f.a.innerContainer,children:Object(a.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},onKeyPress:function(e){if(13===e.charCode)return e.preventDefault()},children:[Object(a.jsx)(C,{label:"Title",setter:i,type:"text"}),!y&&Object(a.jsx)(C,{label:"Advanced Search",setter:D,type:"checkbox",value:y}),y&&k({setAuthor:u,setLanguage:d,setPublisher:m,language:h}),Object(a.jsx)("button",{onClick:function(t){return A({title:c,author:l,language:h,publisher:O},e,t)},children:"Search\ud83d\udd0d"})]})})})},L=n(10),N=n.n(L),S=n.p+"static/media/questionMark.125fb040.jpg",F=function(e,t){var n=e&&e.split(/[.|!|?]\s/)[0];return n&&n.length>t&&(n=n.substr(0,t-1)+" ..."),n&&n||"Description not found"},B=function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){if(t.current){var n=t.current.offsetHeight;e.setItemHeight(n)}}),[t]),Object(a.jsx)("div",{children:e.itemData&&Object(a.jsxs)("div",{className:N.a.container,ref:t,children:[Object(a.jsx)("img",{className:N.a.bookCover,src:e.itemData.imageLinks&&e.itemData.imageLinks.smallThumbnail||S,alt:e.itemData.title}),Object(a.jsxs)("div",{className:N.a.textContainer,children:[Object(a.jsx)("h4",{children:F(e.itemData.title,150)}),Object(a.jsx)("p",{children:F(e.itemData.description,150)})]})]})},e.key)},I=n(13),T=n.n(I),E=function(e){return Object(a.jsx)("div",{className:T.a.container,children:Object(a.jsx)("div",{className:T.a.innerContainer,children:e.booksData&&e.booksData.map((function(t,n){return Object(a.jsx)(B,{itemData:t.volumeInfo,setItemHeight:e.setItemHeight},n)}))})})},H=n(8),P=n.n(H),Y=function(){return Object(a.jsxs)("h2",{children:[Object(a.jsx)("span",{className:P.a.blue,children:"Find"}),Object(a.jsx)("span",{className:P.a.red,children:"a"}),Object(a.jsx)("span",{className:P.a.yellow,children:"Fancy"}),Object(a.jsx)("span",{className:P.a.green,children:"Book!"})]})};var q=function(){var e=Object(r.useState)([]),t=Object(p.a)(e,2),n=t[0],c=t[1],i=Object(r.useState)(0),o=Object(p.a)(i,2),s=o[0],b=o[1],h=Object(r.useState)(0),d=Object(p.a)(h,2),f=d[0],g=d[1];Object(r.useEffect)((function(){return window.addEventListener("scroll",x),function(){return window.removeEventListener("scroll",x)}}));var x=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(window.scrollY>s&&!f||window.scrollY>2*f*s)&&g(f+1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:j.a.App,children:[Object(a.jsx)(Y,{}),Object(a.jsx)(D,{booksData:n,updateBooksData:c,apiCallCounter:f,setApiCallCounter:g}),Object(a.jsx)(E,{booksData:n,setItemHeight:b})]})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,51)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(q,{})}),document.getElementById("root")),z()},7:function(e,t,n){e.exports={fieldContainer:"FormField_fieldContainer__YuRCC"}},8:function(e,t,n){e.exports={blue:"FancyHeader_blue__I85Ba",red:"FancyHeader_red__2kYqn",yellow:"FancyHeader_yellow__2teUV",green:"FancyHeader_green__1pLzT"}}},[[50,1,2]]]);
//# sourceMappingURL=main.5ca5c4a2.chunk.js.map